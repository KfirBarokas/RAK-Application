FROM httpd:2.4

COPY updated-files/status-page.conf /usr/local/apache2/conf/extra/status-page.conf
RUN echo "Include conf/extra/status-page.conf" >> /usr/local/apache2/conf/httpd.conf

# Arg for pipeline-provided static files
ARG STATIC_DIR=./staticfiles

# Copy static files collected by Django (from CI step)
COPY ${STATIC_DIR} /opt/status-page/statuspage/static

EXPOSE 80 443
